<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <style>
        #prk{width: 300px; text-align: center; }
    </style>
</head>

<body>
    <div style="border: 2px solid black; width: 80%; height: 500px; margin: auto; margin-top: 15px; border-radius: 10px;">
        <div class="d-flex justify-content-between" style="background-color:chartreuse;padding: 10px;">
            <div>  Welcome {{this_user.name}}</div>
            <div >
                <a class="link-offset-2 link-underline link-underline-opacity-0" href="/Home_user/{{this_user.id}}">Home</a> | 
                <a class="link-offset-2 link-underline link-underline-opacity-0" href="/U_summary/{{this_user.id}}">Summary</a> |
                <a class="link-offset-2 link-underline link-underline-opacity-0" href="/login">Logout</a>
            </div>
            <div><a class="link-offset-2 link-underline link-underline-opacity-0" href="/us_prof_edit/{{this_user.id}}">Edit Profile  </a></div>
        </div>
        <div class="card my-3">
            <div class="card-body" style="text-align: center; background-color: bisque;" >
                <b>Recent Parking History</b>
            </div>
        </div>
        <div style="max-height: 150px; overflow-y: scroll;">
        <table class="table table-bordered" style="text-align: center; border: 2px solid green; width: 90%; margin: auto;">
            <tr>
                <th>Id</th>
                <th>Location</th>
                <th>Vehicle No</th>
                <th>Timestamp</th>
                <th>Action</th>
            </tr>
            {% for spot in reserve %}
            <tr>
                <td>{{spot.spot_id}}</td>
                <td>{{spot.location}}</td>
                <td>{{spot.vehicle_no}}</td>
                <td>{{spot.parking_time}}</td>
                {% if spot.status == "occupied" %}
                <td><a class="btn btn-success" href="/release/{{this_user.id}}/{{spot.spot_id}}/{{spot.lot_id}}" role="button">Release</a></td>
                {% else %}
                <td><button type="button" class="btn btn-warning" disabled>Parked Out</button></td>
                {% endif %}
            </tr>
            {% endfor %}
        </table>
        </div>
        <div class="my-5" style="text-align:center;margin: auto;"><h4>Search Parking Lot</h4>
            <div class="row mb-3 mx-2">                
                <form class="d-flex my-3" action="/us_search/{{this_user.id}}">
                    <select class="form-select w-25 p-2 " aria-label="Default select example" name="key">
                        <option selected value="location">Location</option>
                        <option value="pincode">Pin code</option>
                    </select>
                    <input class="form-control" type="search" aria-label="search" name="search">
                    <input class="btn btn-success mx-2" type="submit" value="search">
                </form>


            </div>
        </div>          
    </div>
</body>
</html>